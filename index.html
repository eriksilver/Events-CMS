<!doctype html>
<html class="no-js" lang="en" ng-app="myApp">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Foundation | Welcome</title>
    <link rel="stylesheet" href="css/foundation.css" />
    <link rel="stylesheet" href="css/app.css" />

    <!-- Angular -->
    <script src="/node_modules/angular/angular.js"></script>
    <!-- UI-Router -->
    <script src="/node_modules/angular-ui-router/release/angular-ui-router.js"></script>
    <!-- Firebase -->
    <script src="https://cdn.firebase.com/js/client/2.2.4/firebase.js"></script>
    <!-- AngularFire -->
    <script src="https://cdn.firebase.com/libs/angularfire/1.1.3/angularfire.min.js"></script>

    <!-- App Script -->
    <script>
    var myApp = angular.module('myApp', ['ui.router','firebase']);
    myApp.config(function($stateProvider, $urlRouterProvider){

        // For any unmatched url, send to /route1
        $urlRouterProvider.otherwise("/")

        $stateProvider
        .state('home', {
            url: "/",
        })
        .state('route1', {
            url: "/route1",
            templateUrl: "route1.html"
        })
        .state('route1.list', {
            url: "/list",
            templateUrl: "route1.list.html",
            controller: function($scope){
                $scope.items = ["A", "List", "Of", "Items"];
            }
        })

        .state('route2', {
            url: "/route2",
            templateUrl: "route2.html"
        })
        .state('route2.list', {
            url: "/list",
            templateUrl: "route2.list.html",
            controller: function($scope){
                $scope.things = ["A", "Set", "Of", "Things"];
            }
        })
    })

    // Firebase example with 3 way binding
    myApp.controller("SampleCtrl", function($scope, $firebaseArray) {
        //create Firebase events array
        var ref = new Firebase("https://dazzling-torch-1941.firebaseio.com/events");

        // create a synchronized array for events
        $scope.events = $firebaseArray(ref);

        // setup database schema
        // the event is automatically added to our Firebase database
        $scope.addEvent = function() {
            $scope.events.$add({
                eventTitle: $scope.newEventTitle,
                startDate: " ",
                endDate: " ",
                category: " ",
                description: " ",
                featuredFlag: " ",
                createdAt: Firebase.ServerValue.TIMESTAMP,
                updatedAt: " "
            });
        };

    });

    </script>
</head>
<body ng-controller="SampleCtrl">

    <!-- Firebase html -->
    <ul>
        <li ng-repeat="event in events">
            <!-- edit an event -->
            <input ng-model="event.eventTitle" ng-change="events.$save(event)" />
            <!-- delete an event -->
            <button ng-click="events.$remove(event)">Delete Event</button>
        </li>
    </ul>
    <!-- push a new event onto the array -->
    <form ng-submit="addEvent()">
        <input ng-model="newEventTitle" />
        <button type="submit">Add Event</button>
    </form>



    <!-- UI Router Example -->
    <div class="">
        <div class="">
            <a class="" ui-sref="home">Home</a>
            <ul class="">
                <li><a ui-sref="route1">Route 1</a></li>
                <li><a ui-sref="route2">Route 2</a></li>
            </ul>
        </div>
    </div>
    <div ui-view></div>

        <script src="js/vendor/jquery.min.js"></script>
        <script src="js/vendor/what-input.min.js"></script>
        <script src="js/foundation.min.js"></script>
        <script src="js/app.js"></script>
    </body>
    </html>
